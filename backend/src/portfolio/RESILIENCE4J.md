# Resilience4j & 모니터링

태그: PORTFOLIO
날짜: 2024년 3월 15일
참여자: 김승진, 진주원

## 문제상황

---

> 사용자 경로 제공에 있어 Kakao, Naver, Tmap Open API를 사용하였고 Open API에 장애가 발생한 경우 처리에 있어 유연한 처리가 필요함을 느낌
>

### 접근

---

- Resilience4j를 통해 Open API에 장애가 발생한 경우 close - open - half open 단계에 걸쳐 유연한 처리

### 설명

---

- Close
    - Open API에 장애가 발생하지 않은 경우 → 기존과 동일하게 로직 수행
- Open
    - Open API에 장애가 발생 ( Open API의 실패율이 30%에 도달한 경우)
    - 이후 10초간 Open API 요청을 수행하지 않고 Default Failure 처리
- Half Open
    - Open API 처리가 정상화된 경우 → Close 상태 변경
    - 정상화되지 않은 경우 → Open 상태 변경

## 분석

---

## Resilience4j 모니터링

- 서킷브레이커 1개가 OpenAPI 장애로 Open 돼있고 3개가 Close 돼있는 것을 볼 수 있다.

![스크린샷 2024-03-15 오후 8.10.01.png](Resilience4j%20&%20%E1%84%86%E1%85%A9%E1%84%82%E1%85%B5%E1%84%90%E1%85%A5%E1%84%85%E1%85%B5%E1%86%BC%20c0e30d6557b143849400cd830803c804/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-03-15_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.10.01.png)

## SpringBoot 서버 모니터링 (JVM 관련 지표)

![스크린샷 2024-03-15 오후 8.12.03.png](Resilience4j%20&%20%E1%84%86%E1%85%A9%E1%84%82%E1%85%B5%E1%84%90%E1%85%A5%E1%84%85%E1%85%B5%E1%86%BC%20c0e30d6557b143849400cd830803c804/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-03-15_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.12.03.png)

## SpringBoot 서버 모니터링 (요청, 로그 관련 지표)

![스크린샷 2024-03-15 오후 8.13.23.png](Resilience4j%20&%20%E1%84%86%E1%85%A9%E1%84%82%E1%85%B5%E1%84%90%E1%85%A5%E1%84%85%E1%85%B5%E1%86%BC%20c0e30d6557b143849400cd830803c804/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-03-15_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.13.23.png)
